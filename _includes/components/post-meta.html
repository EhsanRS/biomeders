{% comment %}
  Post metadata: date, reading time, tags

  Usage:
  {% include components/post-meta.html post=post %}
{% endcomment %}

{% assign post = include.post | default: page %}
{% assign words = post.content | number_of_words %}
{% assign minutes = words | divided_by: 200 %}
{% if minutes < 1 %}{% assign minutes = 1 %}{% endif %}

<div class="post-meta">
  <span class="post-meta__date">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="16" y1="2" x2="16" y2="6"></line>
      <line x1="8" y1="2" x2="8" y2="6"></line>
      <line x1="3" y1="10" x2="21" y2="10"></line>
    </svg>
    <time datetime="{{ post.date | date_to_xmlschema }}">
      {{ post.date | date: "%B %d, %Y" }}
    </time>
  </span>

  <span class="post-meta__reading-time">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <circle cx="12" cy="12" r="10"></circle>
      <polyline points="12 6 12 12 16 14"></polyline>
    </svg>
    {{ minutes }} min read
  </span>

  {% if post.tags.size > 0 %}
  <span class="post-meta__tags">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
      <line x1="7" y1="7" x2="7.01" y2="7"></line>
    </svg>
    {% for tag in post.tags %}
    <a href="{{ '/tags/' | relative_url }}#{{ tag | slugify }}" class="post-meta__tag">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
    {% endfor %}
  </span>
  {% endif %}
</div>
